(function(t){function e(e){for(var i,o,d=e[0],u=e[1],c=e[2],l=0,f=[];l<d.length;l++)o=d[l],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);s&&s(e);while(f.length)f.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,d=1;d<n.length;d++){var u=n[d];0!==a[u]&&(i=!1)}i&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},a={app:0},r=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/virus-war/dist/";var d=window["webpackJsonp"]=window["webpackJsonp"]||[],u=d.push.bind(d);d.push=e,d=d.slice();for(var c=0;c<d.length;c++)e(d[c]);var s=u;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"container"}},[n("div",{attrs:{id:"virusmap"}}),n("div",{attrs:{id:"dayinfo"}},[t._v("第"+t._s(t.day)+"天")]),n("ul",{attrs:{id:"info"}},[n("li",{staticStyle:{color:"white"}},[t._v("未感染")]),n("li",{staticStyle:{color:"yellow"}},[t._v("潜伏期")]),n("li",{staticStyle:{color:"red"}},[t._v("已确诊")]),n("li",{staticStyle:{color:"white"}},[t._v("空余床位数："+t._s(t.freeBedNum))]),n("li",{staticStyle:{color:"white"}},[t._v("死亡人数："+t._s(t.deadCount))]),n("li",{staticStyle:{color:"green"}},[t._v("康复人数："+t._s(t.healCount))])]),n("div",{class:{expand:t.showForm},attrs:{id:"form"}},[t.showForm?t._e():n("a",{staticClass:"btn btn-open",on:{click:t.toggleForm}},[t._v("+ 调整参数")]),t.showForm?n("a",{staticClass:"btn btn-close",on:{click:t.toggleForm}},[t._v("- 调整参数")]):t._e(),t.showForm?n("div",{staticClass:"form-content"},[n("div",[t._v("人员活动范围："),n("input",{directives:[{name:"model",rawName:"v-model",value:t.人员活动范围,expression:"人员活动范围"}],attrs:{type:"number"},domProps:{value:t.人员活动范围},on:{input:function(e){e.target.composing||(t.人员活动范围=e.target.value)}}})]),n("button",{staticClass:"confirm",on:{click:t.init}},[t._v("重新开始")])]):t._e()])])},r=[],o=(n("99af"),n("4de4"),n("4160"),n("caad"),n("c975"),n("159b"),n("a5cf")),d=20,u=.1,c=.005,s=1e4,l=50,f=10,h=14,_=.2,y=.79,v=30,p=20,m=null,x=[];function g(){for(var t=0,e=0;e<6;e++)t+=Math.random();return t/6}function w(t){return t[Math.floor(Math.random()*t.length)]}function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=[];if(t.length<=e)return n.concat(t);while(n.length<e){var i=w(t);n.includes(i)||n.push(i)}return n}var S={name:"app",data:function(){return{showForm:!1,day:1,dayTimer:null,deadCount:0,healCount:0,"人员活动范围":d,freeBedNum:p,configs:{totalCount:s}}},mounted:function(){this.init()},methods:{createPoint:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16777215,e=g()*m.renderer.width,n=g()*m.renderer.height,i=new o["b"];return i.beginFill(t),i.drawCircle(0,0,.5),i.endFill(),m.stage.addChild(i),i.x=e,i.y=n,i.__xindex=Math.floor(i.x/f),i.__yindex=Math.floor(i.y/f),i},init:function(){var t=this;m&&m.destroy(),x=[],this.day=1,this.freeBedNum=p,this.deadCount=0,this.healCount=0,this.人员活动范围=this.人员活动范围||d,m=new o["a"]({resizeTo:document.getElementById("virusmap")}),document.getElementById("virusmap").innerHTML="",document.getElementById("virusmap").appendChild(m.view);for(var e=0;e<this.configs.totalCount;e++){var n=this.createPoint();x.push(n)}this.infectPoints(l),m.ticker.add((function(){({}),x.forEach(t.goAround)})),this.startDayTimer()},startDayTimer:function(){var t=this;this.dayTimer&&clearInterval(this.dayTimer),this.dayTimer=setInterval((function(){t.day++,t.updateHealed(),t.updateDead(),t.updateQueZhen(),t.updateInfect()}),1e3)},heal:function(t){if(2===t.infectStatus){!0===t.__inHospital&&this.freeBedNum++;var e=this.createPoint(65280);e.infectStatus=3,e.x=t.x,e.y=t.y,e.__xindex=t.__xindex,e.__yindex=t.__yindex;var n=x.indexOf(t);x[n]=e,t.destroy(),m.stage.addChild(e),this.healCount++}},dead:function(t){if(2===t.infectStatus){var e=this.createPoint(3355443);e.infectStatus=4,e.x=t.x,e.y=t.y,e.__xindex=t.__xindex,e.__yindex=t.__yindex;var n=x.indexOf(t);x[n]=e,t.destroy(),m.stage.addChild(e),this.deadCount++}},updateHealed:function(){var t=this;x.forEach((function(e){e.__healDay===t.day&&t.heal(e)}))},updateDead:function(){var t=this;x.forEach((function(e){e.__deadDay===t.day&&t.dead(e)}))},updateInfect:function(){var t=this,e=(Math.floor(m.renderer.width/f),Math.floor(m.renderer.height/f),{});for(var n in x.forEach((function(t){var n="".concat(t.__xindex,",").concat(t.__yindex);e[n]=e[n]||[],e[n].push(t)})),e){var i=e[n],a=i.filter((function(t){return!t.infectStatus})),r=i.filter((function(t){return 1===t.infectStatus})),o=i.filter((function(t){return 2===t.infectStatus})),d=r.length+o.length;d>0&&a.forEach((function(e){var n=Math.random()<c;n&&t.infect(e)}))}},updateQueZhen:function(){var t=this;x.forEach((function(e){e.__queZhenDay===t.day&&t.queZhen(e)}))},infectPoints:function(t){b(x,t).forEach(this.infect)},goAround:function(t){4!==t.infectStatus&&Math.random()<u&&(t.x+=g()*this.人员活动范围-this.人员活动范围/2,t.y+=g()*this.人员活动范围-this.人员活动范围/2,t.__xindex=Math.floor(t.x/f),t.__yindex=Math.floor(t.y/f))},infect:function(t){if(!(t.infectStatus>0)){var e=this.createPoint(15990621);e.infectStatus=1,e.x=t.x,e.y=t.y,e.__xindex=t.__xindex,e.__yindex=t.__yindex,e.__infectDay=this.day,e.__queZhenDay=this.day+Math.ceil(h*g());var n=x.indexOf(t);x[n]=e,t.destroy(),m.stage.addChild(e)}},queZhen:function(t){if(!(t.infectStatus>1)){var e=this.createPoint(16711680);if(e.infectStatus=2,e.x=t.x,e.y=t.y,this.freeBedNum>0){this.freeBedNum--;var n=Math.random()<y,i=this.day+Math.ceil(v*g());e.__inHospital=!0,n?e.__healDay=i:e.__deadDay=i}else{var a=Math.random()<_,r=this.day+Math.ceil(v*g());a?e.__healDay=r:e.__deadDay=r}var o=x.indexOf(t);x[o]=e,t.destroy(),m.stage.addChild(e)}},toggleForm:function(){this.showForm=!this.showForm}}},C=S,M=(n("7c55"),n("2877")),O=Object(M["a"])(C,a,r,!1,null,null,null),P=O.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(P)}}).$mount("#app")},7743:function(t,e,n){},"7c55":function(t,e,n){"use strict";var i=n("7743"),a=n.n(i);a.a}});
//# sourceMappingURL=app.42d01e29.js.map