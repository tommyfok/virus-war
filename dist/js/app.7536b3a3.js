(function(t){function e(e){for(var r,o,u=e[0],c=e[1],f=e[2],l=0,s=[];l<u.length;l++)o=u[l],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&s.push(i[o][0]),i[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);d&&d(e);while(s.length)s.shift()();return a.push.apply(a,f||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,u=1;u<n.length;u++){var c=n[u];0!==i[c]&&(r=!1)}r&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},i={app:0},a=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=e,u=u.slice();for(var f=0;f<u.length;f++)e(u[f]);var d=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"container"}},[t._v(" 病毒图： "),n("div",{attrs:{id:"virusmap"}}),t._v(" 第"+t._s(t.day)+"天 ")])},a=[],o=(n("99af"),n("4de4"),n("4160"),n("caad"),n("c975"),n("159b"),n("a5cf")),u=n("5118"),c=10,f=.05,d=2e4,l=10,s=5,h=14,p=null,v=[];function y(){for(var t=0,e=0;e<6;e++)t+=Math.random();return t/6}function _(t){return t[Math.floor(Math.random()*t.length)]}function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=[];if(t.length<=e)return n.concat(t);while(n.length<e){var r=_(t);n.includes(r)||n.push(r)}return n}var x={name:"app",data:function(){return{day:1,startTime:0,configs:{totalCount:d}}},mounted:function(){this.init()},methods:{createPoint:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16777215,e=y()*p.renderer.width,n=y()*p.renderer.height,r=new o["b"];return r.beginFill(t),r.drawCircle(0,0,1),r.endFill(),p.stage.addChild(r),r.x=e,r.y=n,r.__xindex=Math.floor(r.x/s),r.__yindex=Math.floor(r.y/s),r},init:function(){var t=this;p&&p.destroy(),v=[],this.startTime=Date.now(),p=new o["a"],document.getElementById("virusmap").innerHTML="",document.getElementById("virusmap").appendChild(p.view);for(var e=0;e<this.configs.totalCount;e++){var n=this.createPoint();v.push(n)}this.infectPoints(l),p.ticker.add((function(){({}),v.forEach(t.goAround)})),this.startDayTimer()},startDayTimer:function(){var t=this;this.dayTimer&&Object(u["clearInterval"])(this.dayTimer),this.dayTimer=setInterval((function(){t.day++,t.updateInfect(),t.updateQueZhen()}),1e3)},updateInfect:function(){var t=this,e=(Math.floor(p.renderer.width/s),Math.floor(p.renderer.height/s),{});for(var n in v.forEach((function(t){var n="".concat(t.__xindex,",").concat(t.__yindex);e[n]=e[n]||[],e[n].push(t)})),e){var r=e[n],i=r.filter((function(t){return!t.infectStatus})),a=r.filter((function(t){return 1===t.infectStatus})),o=r.filter((function(t){return 2===t.infectStatus})),u=a.length+o.length;if(u>0){r.length;i.forEach((function(e){var n=Math.random()<f;n&&t.infect(e)}))}}},updateQueZhen:function(){var t=this;v.forEach((function(e){e.__queZhenDay===t.day&&t.queZhen(e)}))},infectPoints:function(t){g(v,t).forEach(this.infect)},goAround:function(t){t.x+=y()*c-c/2,t.y+=y()*c-c/2,t.__xindex=Math.floor(t.x/s),t.__yindex=Math.floor(t.y/s)},infect:function(t){if(!(t.infectStatus>0)){var e=this.createPoint(15990621);e.infectStatus=1,e.x=t.x,e.y=t.y,e.__xindex=t.__xindex,e.__yindex=t.__yindex,e.__infectDay=this.day,e.__queZhenDay=this.day+Math.ceil(h*y());var n=v.indexOf(t);v[n]=e,t.destroy(),p.stage.addChild(e)}},queZhen:function(t){if(!(t.infectStatus>1)){var e=this.createPoint(16711680);e.infectStatus=2,e.x=t.x,e.y=t.y;var n=v.indexOf(t);v[n]=e,t.destroy(),p.stage.addChild(e)}}}},m=x,b=n("2877"),w=Object(b["a"])(m,i,a,!1,null,null,null),M=w.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(M)}}).$mount("#app")}});
//# sourceMappingURL=app.7536b3a3.js.map